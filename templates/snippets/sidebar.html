{% load static %}

<div class="sideBar">
    <section class="sideContent">
        <div class="sidePoster">
            <img src="{% static 'temp/eunji.jpg' %}" alt="">
        </div>
        <ul class="sideDesc">
            <li>콘서트</li>
            <li>정은지 여름아이 콘서트</li>
            <li>2021.07.01 ~ 2021.07.30</li>
            <li>상명 아트센터 계딩홀</li>
            <a href="#"><i class="fas fa-ticket-alt"></i>예매하기</a>
        </ul>
    </section>
    <section class="sideContent">
        <div class="sidePoster">
            <img src="{% static 'temp/lovelz.jpg' %}" alt="">
        </div>
        <ul class="sideDesc">
            <li>콘서트</li>
            <li>러블리즈 콘서트</li>
            <li>2021.07.01 ~ 2021.07.30</li>
            <li>상명 아트센터 계딩홀</li>
            <a href="#"><i class="fas fa-ticket-alt"></i>예매하기</a>
        </ul>
    </section>
    <section class="sideContent">
        <div class="sidePoster">
            <img src="{% static 'temp/eyeson.jpg' %}" alt="">
        </div>
        <ul class="sideDesc">
            <li>콘서트</li>
            <li>아이즈원 온라인 콘서트</li>
            <li>2021.07.01 ~ 2021.07.30</li>
            <li>상명 아트센터 계딩홀</li>
            <a href="#"><i class="fas fa-ticket-alt"></i>예매하기</a>
        </ul>
    </section>
    <div class="buttonWrap">
        <button class="pauseBtn"><i class="fas fa-pause"></i></button>
        <!-- <button class="playBtn"><i class="fas fa-play"></i></button> -->
        <ul class="pointWrap">
            <li>
                <div class="inner"></div>
            </li>
            <li>
                <div class="inner"></div>
            </li>
            <li>
                <div class="inner"></div>
            </li>
        </ul>
    </div>
</div>
<script>
    let contentNum = 0;
    let totalNum = 0;
    let sideContent, pointBtnAll, pointInnerAll;
    let pauseBtn, icon;
    let timerId;
    let flag = true;
    window.onload = function () {
        sideContent = document.querySelectorAll('.sideContent');
        pointBtnAll = document.querySelectorAll('.pointWrap li');
        pointInnerAll = document.querySelectorAll('.pointWrap li .inner');
        descriptionAll = document.querySelectorAll('.sideDesc');
        pauseBtn = document.querySelector('.pauseBtn');
        icon = document.querySelector('.pauseBtn i')
        totalNum = sideContent.length;


        for (let i = 0; i < pointBtnAll.length; i++) {
            (function (idx) {
                pointBtnAll[idx].onclick = () => {
                    contentNum = idx;
                    contentChangeFunc();
                }
            })(i);
        }
        contentChangeFunc();

        pauseBtn.addEventListener('click', () => {
            contentPauseFunc()
        })
    }

    function nextContent() {
        if (contentNum < totalNum - 1) {
            contentNum++;
        } else {
            contentNum = 0;
        }
        contentChangeFunc();
    }

    function contentChangeFunc() {
        for (var i = 0; i < totalNum; i++) {
            if (contentNum == i) {
                sideContent[i].classList.add("active");
                pointBtnAll[i].classList.add("active");
                pointInnerAll[i].classList.add("active");
                descriptionAll[i].classList.add("active");
            } else {
                sideContent[i].classList.remove("active");
                pointBtnAll[i].classList.remove("active");
                pointInnerAll[i].classList.remove("active");
            }
        }
    }

    function contentPauseFunc() {
        if (flag === true) {
            clearInterval(timerId)
            icon.classList.add("fa-play")
            icon.classList.remove("fa-pause")
            flag = false
        } else {
            icon.classList.add("fa-pause")
            icon.classList.remove("fa-play")
            flag = true
            timerId = setInterval(nextContent, 4000)
        }

    }

    timerId = setInterval(nextContent, 4000)
</script>
<style>
    .sideBar {
        position: relative;
        width: 25vw;
        height: 100vh;
        background: #fafafa;
        box-shadow: 0px 5px 15px grey;
    }

    .sideBar .sideContent {
        width: 100%;
        height: 80vh;
        transition: all .3s ease;
        position: absolute;
        visibility: hidden;
        opacity: 0;
    }

    .sideBar .sideContent.active {
        visibility: visible;
        opacity: 1;

    }

    .buttonWrap {
        width: 100%;
        top: 85%;
        text-align: center;
        position: absolute;
    }

    .sidePoster {
        position: relative;
        width: 100%;
        height: 80%;
    }

    .sidePoster img {
        width: 100%;
        height: 100%;
    }

    .sideDesc {
        position: relative;
        padding: 1rem 1.5rem;
    }

    .sideDesc li {
        margin-bottom: 1.2rem;
    }

    .sideDesc li:first-child,
    .sideDesc li:nth-child(3),
    .sideDesc li:nth-child(4) {
        font-size: 12px;
    }

    .sideDesc li:nth-child(2) {
        font-weight: bold;
        font-size: 20px;
    }

    .sideDesc a {
        position: absolute;
        top: 85px;
        font-size: 14px;
        right: 30px;
        font-weight: bold;
        color: cornflowerblue;
    }

    .pauseBtn {
        position: relative;
        cursor: pointer;
        border: none;
        background-color: #fafafa;
        font-size: 12px;
        top: -1px;
        right: 7px;
    }

    .pointWrap {
        display: inline-block;
    }

    .buttonWrap .pointWrap li {
        position: relative;
        display: inline-block;
        width: 12px;
        height: 12px;
        margin: 0 5px;
        text-align: center;
        cursor: pointer;
        background-color: rgba(0, 0, 0, 0.4);
        border-radius: 50%;
        -webkit-transition: background .3s ease-out;
        transition: background .3s ease-out;
    }

    .pointWrap li .inner {
        /* position: absolute; */
        width: 8px;
        height: 8px;
        background-color: #fafafa;
        border-radius: 100%;
        transform: translate(2px, 2px);
        /* top: 2px;
        left: 2px; */
    }

    .pointWrap li.active,
    .pointWrap li .inner.active {
        background-color: black;
    }
</style>